
  <!DOCTYPE html>
  <html>
    <head>
      <title>mutation.ts</title>
      <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" type="text/css" rel="stylesheet">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/mode/javascript/javascript.min.js" type="text/javascript" charset="utf-8"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.58.2/codemirror.min.css" type="text/css" rel="stylesheet">
<script src="../../../../assets/source-file.js" type="text/javascript" charset="utf-8"></script>
<link href="../../../../assets/source-file.css" type="text/css" rel="stylesheet">
    </head>
    <body>
    <div style="margin-top:3em" class="ui container"><h1 class="ui header"><a href="../../../../index.html">TypeScript coverage report</a></h1><table style="margin-top:2em" class="ui celled table"><thead class=""><tr class=""><th class="">Filename</th><th class="">Percent</th><th class="">Threshold</th><th class="">Total</th><th class="">Covered</th><th class="">Uncovered</th></tr></thead><tbody class=""><tr class="positive"><td class="">src/sync/processors/mutation.ts</td><td class="">92.39%</td><td class="">0%</td><td class="">710</td><td class="">656</td><td class="">54</td></tr></tbody></table><textarea id="editor" readonly="" style="margin-top:3em">import API, { GraphQLResult, GRAPHQL_AUTH_MODE } from &#x27;@aws-amplify/api&#x27;;
import {
	ConsoleLogger as Logger,
	jitteredBackoff,
	NonRetryableError,
	retry,
} from &#x27;@aws-amplify/core&#x27;;
import Observable, { ZenObservable } from &#x27;zen-observable-ts&#x27;;
import { MutationEvent } from &#x27;../&#x27;;
import { ModelInstanceCreator } from &#x27;../../datastore/datastore&#x27;;
import { ExclusiveStorage as Storage } from &#x27;../../storage/storage&#x27;;
import {
	AuthModeStrategy,
	ConflictHandler,
	DISCARD,
	ErrorHandler,
	GraphQLCondition,
	InternalSchema,
	isModelFieldType,
	isTargetNameAssociation,
	ModelInstanceMetadata,
	OpType,
	PersistentModel,
	PersistentModelConstructor,
	SchemaModel,
	TypeConstructorMap,
	ProcessName,
	AmplifyContext,
} from &#x27;../../types&#x27;;
import {
	exhaustiveCheck,
	extractTargetNamesFromSrc,
	USER,
	USER_AGENT_SUFFIX_DATASTORE,
	ID,
} from &#x27;../../util&#x27;;
import { MutationEventOutbox } from &#x27;../outbox&#x27;;
import {
	buildGraphQLOperation,
	createMutationInstanceFromModelOperation,
	getModelAuthModes,
	TransformerMutationType,
	getTokenForCustomAuth,
} from &#x27;../utils&#x27;;
import { getMutationErrorType } from &#x27;./errorMaps&#x27;;

const MAX_ATTEMPTS = 10;

const logger = new Logger(&#x27;DataStore&#x27;);

type MutationProcessorEvent = {
	operation: TransformerMutationType;
	modelDefinition: SchemaModel;
	model: PersistentModel;
	hasMore: boolean;
};

class MutationProcessor {
	private observer: ZenObservable.Observer&lt;MutationProcessorEvent&gt;;
	private readonly typeQuery = new WeakMap&lt;
		SchemaModel,
		[TransformerMutationType, string, string][]
	&gt;();
	private processing: boolean = false;

	constructor(
		private readonly schema: InternalSchema,
		private readonly storage: Storage,
		private readonly userClasses: TypeConstructorMap,
		private readonly outbox: MutationEventOutbox,
		private readonly modelInstanceCreator: ModelInstanceCreator,
		private readonly MutationEvent: PersistentModelConstructor&lt;MutationEvent&gt;,
		private readonly amplifyConfig: Record&lt;string, any&gt; = {},
		private readonly authModeStrategy: AuthModeStrategy,
		private readonly errorHandler: ErrorHandler,
		private readonly conflictHandler: ConflictHandler,
		private readonly amplifyContext: AmplifyContext
	) {
		this.amplifyContext.API = this.amplifyContext.API || API;
		this.generateQueries();
	}

	private generateQueries() {
		Object.values(this.schema.namespaces).forEach(namespace =&gt; {
			Object.values(namespace.models)
				.filter(({ syncable }) =&gt; syncable)
				.forEach(model =&gt; {
					const [createMutation] = buildGraphQLOperation(
						namespace,
						model,
						&#x27;CREATE&#x27;
					);
					const [updateMutation] = buildGraphQLOperation(
						namespace,
						model,
						&#x27;UPDATE&#x27;
					);
					const [deleteMutation] = buildGraphQLOperation(
						namespace,
						model,
						&#x27;DELETE&#x27;
					);

					this.typeQuery.set(model, [
						createMutation,
						updateMutation,
						deleteMutation,
					]);
				});
		});
	}

	private isReady() {
		return this.observer !== undefined;
	}

	public start(): Observable&lt;MutationProcessorEvent&gt; {
		const observable = new Observable&lt;MutationProcessorEvent&gt;(observer =&gt; {
			this.observer = observer;

			this.resume();

			return () =&gt; {
				this.pause();
			};
		});

		return observable;
	}

	public async resume(): Promise&lt;void&gt; {
		if (this.processing || !this.isReady()) {
			return;
		}

		this.processing = true;
		let head: MutationEvent;
		const namespaceName = USER;

		// start to drain outbox
		while (
			this.processing &amp;&amp;
			(head = await this.outbox.peek(this.storage)) !== undefined
		) {
			const { model, operation, data, condition } = head;
			const modelConstructor = this.userClasses[
				model
			] as PersistentModelConstructor&lt;MutationEvent&gt;;
			let result: GraphQLResult&lt;Record&lt;string, PersistentModel&gt;&gt;;
			let opName: string;
			let modelDefinition: SchemaModel;
			try {
				const modelAuthModes = await getModelAuthModes({
					authModeStrategy: this.authModeStrategy,
					defaultAuthMode: this.amplifyConfig.aws_appsync_authenticationType,
					modelName: model,
					schema: this.schema,
				});

				const operationAuthModes = modelAuthModes[operation.toUpperCase()];

				let authModeAttempts = 0;
				const authModeRetry = async () =&gt; {
					try {
						logger.debug(
							`Attempting mutation with authMode: ${operationAuthModes[authModeAttempts]}`
						);
						const response = await this.jitteredRetry(
							namespaceName,
							model,
							operation,
							data,
							condition,
							modelConstructor,
							this.MutationEvent,
							head,
							operationAuthModes[authModeAttempts]
						);

						logger.debug(
							`Mutation sent successfully with authMode: ${operationAuthModes[authModeAttempts]}`
						);

						return response;
					} catch (error) {
						authModeAttempts++;
						if (authModeAttempts &gt;= operationAuthModes.length) {
							logger.debug(
								`Mutation failed with authMode: ${
									operationAuthModes[authModeAttempts - 1]
								}`
							);
							throw error;
						}
						logger.debug(
							`Mutation failed with authMode: ${
								operationAuthModes[authModeAttempts - 1]
							}. Retrying with authMode: ${
								operationAuthModes[authModeAttempts]
							}`
						);
						return await authModeRetry();
					}
				};

				[result, opName, modelDefinition] = await authModeRetry();
			} catch (error) {
				if (error.message === &#x27;Offline&#x27; || error.message === &#x27;RetryMutation&#x27;) {
					continue;
				}
			}

			if (result === undefined) {
				logger.debug(&#x27;done retrying&#x27;);
				await this.storage.runExclusive(async storage =&gt; {
					await this.outbox.dequeue(storage);
				});
				continue;
			}

			const record = result.data[opName];
			let hasMore = false;

			await this.storage.runExclusive(async storage =&gt; {
				// using runExclusive to prevent possible race condition
				// when another record gets enqueued between dequeue and peek
				await this.outbox.dequeue(storage, record, operation);
				hasMore = (await this.outbox.peek(storage)) !== undefined;
			});

			this.observer.next({
				operation,
				modelDefinition,
				model: record,
				hasMore,
			});
		}

		// pauses itself
		this.pause();
	}

	private async jitteredRetry(
		namespaceName: string,
		model: string,
		operation: TransformerMutationType,
		data: string,
		condition: string,
		modelConstructor: PersistentModelConstructor&lt;PersistentModel&gt;,
		MutationEvent: PersistentModelConstructor&lt;MutationEvent&gt;,
		mutationEvent: MutationEvent,
		authMode: GRAPHQL_AUTH_MODE
	): Promise&lt;
		[GraphQLResult&lt;Record&lt;string, PersistentModel&gt;&gt;, string, SchemaModel]
	&gt; {
		return await retry(
			async (
				model: string,
				operation: TransformerMutationType,
				data: string,
				condition: string,
				modelConstructor: PersistentModelConstructor&lt;PersistentModel&gt;,
				MutationEvent: PersistentModelConstructor&lt;MutationEvent&gt;,
				mutationEvent: MutationEvent
			) =&gt; {
				const [query, variables, graphQLCondition, opName, modelDefinition] =
					this.createQueryVariables(
						namespaceName,
						model,
						operation,
						data,
						condition
					);

				const authToken = await getTokenForCustomAuth(
					authMode,
					this.amplifyConfig
				);

				const tryWith = {
					query,
					variables,
					authMode,
					authToken,
					userAgentSuffix: USER_AGENT_SUFFIX_DATASTORE,
				};
				let attempt = 0;

				const opType = this.opTypeFromTransformerOperation(operation);

				do {
					try {
						const result = &lt;GraphQLResult&lt;Record&lt;string, PersistentModel&gt;&gt;&gt;(
							await this.amplifyContext.API.graphql(tryWith)
						);
						return [result, opName, modelDefinition];
					} catch (err) {
						if (err.errors &amp;&amp; err.errors.length &gt; 0) {
							const [error] = err.errors;
							const { originalError: { code = null } = {} } = error;

							if (error.errorType === &#x27;Unauthorized&#x27;) {
								throw new NonRetryableError(&#x27;Unauthorized&#x27;);
							}

							if (
								error.message === &#x27;Network Error&#x27; ||
								code === &#x27;ECONNABORTED&#x27; // refers to axios timeout error caused by device&#x27;s bad network condition
							) {
								if (!this.processing) {
									throw new NonRetryableError(&#x27;Offline&#x27;);
								}
								// TODO: Check errors on different env (react-native or other browsers)
								throw new Error(&#x27;Network Error&#x27;);
							}

							if (error.errorType === &#x27;ConflictUnhandled&#x27;) {
								// TODO: add on ConflictConditionalCheck error query last from server
								attempt++;
								let retryWith: PersistentModel | typeof DISCARD;

								if (attempt &gt; MAX_ATTEMPTS) {
									retryWith = DISCARD;
								} else {
									try {
										retryWith = await this.conflictHandler({
											modelConstructor,
											localModel: this.modelInstanceCreator(
												modelConstructor,
												variables.input
											),
											remoteModel: this.modelInstanceCreator(
												modelConstructor,
												error.data
											),
											operation: opType,
											attempts: attempt,
										});
									} catch (err) {
										logger.warn(&#x27;conflict trycatch&#x27;, err);
										continue;
									}
								}

								if (retryWith === DISCARD) {
									// Query latest from server and notify merger

									const [[, opName, query]] = buildGraphQLOperation(
										this.schema.namespaces[namespaceName],
										modelDefinition,
										&#x27;GET&#x27;
									);

									const authToken = await getTokenForCustomAuth(
										authMode,
										this.amplifyConfig
									);

									const serverData = &lt;
										GraphQLResult&lt;Record&lt;string, PersistentModel&gt;&gt;
									&gt;await this.amplifyContext.API.graphql({
										query,
										variables: { id: variables.input.id },
										authMode,
										authToken,
										userAgentSuffix: USER_AGENT_SUFFIX_DATASTORE,
									});

									return [serverData, opName, modelDefinition];
								}

								const namespace = this.schema.namespaces[namespaceName];

								// convert retry with to tryWith
								const updatedMutation =
									createMutationInstanceFromModelOperation(
										namespace.relationships,
										modelDefinition,
										opType,
										modelConstructor,
										retryWith,
										graphQLCondition,
										MutationEvent,
										this.modelInstanceCreator,
										mutationEvent.id
									);

								await this.storage.save(updatedMutation);

								throw new NonRetryableError(&#x27;RetryMutation&#x27;);
							} else {
								try {
									await this.errorHandler({
										recoverySuggestion:
											&#x27;Ensure app code is up to date, auth directives exist and are correct on each model, and that server-side data has not been invalidated by a schema change. If the problem persists, search for or create an issue: https://github.com/aws-amplify/amplify-js/issues&#x27;,
										localModel: variables.input,
										message: error.message,
										operation,
										errorType: getMutationErrorType(error),
										errorInfo: error.errorInfo,
										process: ProcessName.mutate,
										cause: error,
										remoteModel: error.data
											? this.modelInstanceCreator(modelConstructor, error.data)
											: null,
									});
								} catch (err) {
									logger.warn(&#x27;Mutation error handler failed with:&#x27;, err);
								} finally {
									// Return empty tuple, dequeues the mutation
									return error.data
										? [
												{ data: { [opName]: error.data } },
												opName,
												modelDefinition,
										  ]
										: [];
								}
							}
						} else {
							// Catch-all for client-side errors that don&#x27;t come back in the `GraphQLError` format.
							// These errors should not be retried.
							throw new NonRetryableError(err);
						}
					}
				} while (tryWith);
			},
			[
				model,
				operation,
				data,
				condition,
				modelConstructor,
				MutationEvent,
				mutationEvent,
			],
			safeJitteredBackoff
		);
	}

	private createQueryVariables(
		namespaceName: string,
		model: string,
		operation: TransformerMutationType,
		data: string,
		condition: string
	): [string, Record&lt;string, any&gt;, GraphQLCondition, string, SchemaModel] {
		const modelDefinition = this.schema.namespaces[namespaceName].models[model];
		const { primaryKey } = this.schema.namespaces[namespaceName].keys[model];

		const queriesTuples = this.typeQuery.get(modelDefinition);

		const [, opName, query] = queriesTuples.find(
			([transformerMutationType]) =&gt; transformerMutationType === operation
		);

		const { _version, ...parsedData } = &lt;ModelInstanceMetadata&gt;JSON.parse(data);

		// include all the fields that comprise a custom PK if one is specified
		const deleteInput = {};
		if (primaryKey?.length) {
			for (const pkField of primaryKey) {
				deleteInput[pkField] = parsedData[pkField];
			}
		} else {
			deleteInput[ID] = (&lt;any&gt;parsedData).id;
		}

		let mutationInput;

		if (operation === TransformerMutationType.DELETE) {
			// For DELETE mutations, only the key(s) are included in the input
			mutationInput = &lt;ModelInstanceMetadata&gt;deleteInput;
		} else {
			// Otherwise, we construct the mutation input with the following logic
			mutationInput = {};
			const modelFields = Object.values(modelDefinition.fields);

			for (const { name, type, association } of modelFields) {
				// model fields should be stripped out from the input
				if (isModelFieldType(type)) {
					// except for belongs to relations - we need to replace them with the correct foreign key(s)
					if (
						isTargetNameAssociation(association) &amp;&amp;
						association.connectionType === &#x27;BELONGS_TO&#x27;
					) {
						const targetNames: string[] | undefined =
							extractTargetNamesFromSrc(association);

						if (targetNames) {
							// instead of including the connected model itself, we add its key(s) to the mutation input
							for (const targetName of targetNames) {
								mutationInput[targetName] = parsedData[targetName];
							}
						}
					}
					continue;
				}
				// scalar fields / non-model types

				if (operation === TransformerMutationType.UPDATE) {
					if (!parsedData.hasOwnProperty(name)) {
						// for update mutations - strip out a field if it&#x27;s unchanged
						continue;
					}
				}

				// all other fields are added to the input object
				mutationInput[name] = parsedData[name];
			}
		}

		// Build mutation variables input object
		const input: ModelInstanceMetadata = {
			...mutationInput,
			_version,
		};

		const graphQLCondition = &lt;GraphQLCondition&gt;JSON.parse(condition);

		const variables = {
			input,
			...(operation === TransformerMutationType.CREATE
				? {}
				: {
						condition:
							Object.keys(graphQLCondition).length &gt; 0
								? graphQLCondition
								: null,
				  }),
		};
		return [query, variables, graphQLCondition, opName, modelDefinition];
	}

	private opTypeFromTransformerOperation(
		operation: TransformerMutationType
	): OpType {
		switch (operation) {
			case TransformerMutationType.CREATE:
				return OpType.INSERT;
			case TransformerMutationType.DELETE:
				return OpType.DELETE;
			case TransformerMutationType.UPDATE:
				return OpType.UPDATE;
			case TransformerMutationType.GET: // Intentionally blank
				break;
			default:
				exhaustiveCheck(operation);
		}
	}

	public pause() {
		this.processing = false;
	}
}

const MAX_RETRY_DELAY_MS = 5 * 60 * 1000;
const originalJitteredBackoff = jitteredBackoff(MAX_RETRY_DELAY_MS);

/**
 * @private
 * Internal use of Amplify only.
 *
 * Wraps the jittered backoff calculation to retry Network Errors indefinitely.
 * Backs off according to original jittered retry logic until the original retry
 * logic hits its max. After this occurs, if the error is a Network Error, we
 * ignore the attempt count and return MAX_RETRY_DELAY_MS to retry forever (until
 * the request succeeds).
 *
 * @param attempt ignored
 * @param _args ignored
 * @param error tested to see if `.message` is &#x27;Network Error&#x27;
 * @returns number | false :
 */
export const safeJitteredBackoff: typeof originalJitteredBackoff = (
	attempt,
	_args,
	error
) =&gt; {
	const attemptResult = originalJitteredBackoff(attempt);

	// If this is the last attempt and it is a network error, we retry indefinitively every 5 minutes
	if (attemptResult === false &amp;&amp; error?.message === &#x27;Network Error&#x27;) {
		return MAX_RETRY_DELAY_MS;
	}

	return attemptResult;
};

export { MutationProcessor };
</textarea><pre id="annotations" style="display:none">[{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:154,&quot;character&quot;:41,&quot;text&quot;:&quot;aws_appsync_authenticationType&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:192,&quot;character&quot;:13,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:184,&quot;character&quot;:14,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:207,&quot;character&quot;:8,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:207,&quot;character&quot;:14,&quot;text&quot;:&quot;message&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:207,&quot;character&quot;:39,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:207,&quot;character&quot;:45,&quot;text&quot;:&quot;message&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:206,&quot;character&quot;:12,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:297,&quot;character&quot;:10,&quot;text&quot;:&quot;err&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:297,&quot;character&quot;:14,&quot;text&quot;:&quot;errors&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:297,&quot;character&quot;:24,&quot;text&quot;:&quot;err&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:297,&quot;character&quot;:28,&quot;text&quot;:&quot;errors&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:297,&quot;character&quot;:35,&quot;text&quot;:&quot;length&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:298,&quot;character&quot;:14,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:298,&quot;character&quot;:23,&quot;text&quot;:&quot;err&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:298,&quot;character&quot;:27,&quot;text&quot;:&quot;errors&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:299,&quot;character&quot;:32,&quot;text&quot;:&quot;code&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:301,&quot;character&quot;:11,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:301,&quot;character&quot;:17,&quot;text&quot;:&quot;errorType&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:306,&quot;character&quot;:8,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:306,&quot;character&quot;:14,&quot;text&quot;:&quot;message&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:307,&quot;character&quot;:8,&quot;text&quot;:&quot;code&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:316,&quot;character&quot;:11,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:316,&quot;character&quot;:17,&quot;text&quot;:&quot;errorType&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:329,&quot;character&quot;:22,&quot;text&quot;:&quot;input&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:333,&quot;character&quot;:12,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:333,&quot;character&quot;:18,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:339,&quot;character&quot;:43,&quot;text&quot;:&quot;err&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:338,&quot;character&quot;:18,&quot;text&quot;:&quot;err&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:362,&quot;character&quot;:23,&quot;text&quot;:&quot;id&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:362,&quot;character&quot;:37,&quot;text&quot;:&quot;input&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:362,&quot;character&quot;:43,&quot;text&quot;:&quot;id&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:395,&quot;character&quot;:32,&quot;text&quot;:&quot;input&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:396,&quot;character&quot;:19,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:396,&quot;character&quot;:25,&quot;text&quot;:&quot;message&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:399,&quot;character&quot;:21,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:399,&quot;character&quot;:27,&quot;text&quot;:&quot;errorInfo&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:402,&quot;character&quot;:23,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:402,&quot;character&quot;:29,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:403,&quot;character&quot;:57,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:403,&quot;character&quot;:63,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:407,&quot;character&quot;:60,&quot;text&quot;:&quot;err&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:406,&quot;character&quot;:17,&quot;text&quot;:&quot;err&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:410,&quot;character&quot;:16,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:410,&quot;character&quot;:22,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:412,&quot;character&quot;:32,&quot;text&quot;:&quot;error&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:412,&quot;character&quot;:38,&quot;text&quot;:&quot;data&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:296,&quot;character&quot;:14,&quot;text&quot;:&quot;err&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:465,&quot;character&quot;:39,&quot;text&quot;:&quot;id&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:468,&quot;character&quot;:6,&quot;text&quot;:&quot;mutationInput&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:472,&quot;character&quot;:3,&quot;text&quot;:&quot;mutationInput&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:475,&quot;character&quot;:3,&quot;text&quot;:&quot;mutationInput&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:492,&quot;character&quot;:8,&quot;text&quot;:&quot;mutationInput&quot;,&quot;kind&quot;:1},{&quot;file&quot;:&quot;src/sync/processors/mutation.ts&quot;,&quot;line&quot;:508,&quot;character&quot;:4,&quot;text&quot;:&quot;mutationInput&quot;,&quot;kind&quot;:1}]</pre></div>
    <p class="footer-text">TypeScript Coverage Report generated by <a href="https://github.com/plantain-00/type-coverage">type-coverage</a> and <a href="https://github.com/alexcanessa/typescript-coverage-report">typescript-coverage-report</a> at Mon, 17 Oct 2022 20:15:29 GMT</p>
    </body>
  </html>
  